<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìå –ú–æ–¥—É–ª—å Farm (–§–µ—Ä–º–∞) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .breadcrumb {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            font-size: 0.9em;
            color: #666;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .content {
            padding: 40px;
        }

        .content h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .content h2 {
            color: #764ba2;
            font-size: 1.6em;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        .content h3 {
            color: #667eea;
            font-size: 1.3em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .content h4 {
            color: #764ba2;
            font-size: 1.1em;
            margin-top: 15px;
            margin-bottom: 8px;
        }

        .content p {
            line-height: 1.8;
            margin: 15px 0;
            color: #444;
        }

        .content ul, .content ol {
            margin: 15px 0;
            margin-left: 30px;
            line-height: 1.8;
        }

        .content li {
            margin: 8px 0;
            color: #444;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
            font-size: 0.95em;
        }

        .content pre {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .content pre code {
            color: #333;
            padding: 0;
            background: none;
            font-size: 0.9em;
        }

        .content blockquote {
            border-left: 4px solid #667eea;
            padding-left: 20px;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }

        .content a {
            color: #667eea;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .content a:hover {
            border-bottom-color: #667eea;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .content table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .content table td {
            border: 1px solid #ddd;
            padding: 12px;
        }

        .content table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .content hr {
            border: none;
            border-top: 2px solid #667eea;
            margin: 30px 0;
        }

        .content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            justify-content: space-between;
        }

        .nav-button {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .nav-button:hover {
            background: #764ba2;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-button.prev {
            margin-right: auto;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9em;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .nav-button.prev {
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìå –ú–æ–¥—É–ª—å Farm (–§–µ—Ä–º–∞) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h1>
            <p style="opacity: 0.9; font-size: 1.1em;">Chat Manager Bot - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</p>
        </header>

        <div class="breadcrumb">
            <a href="../html/index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a> / 
            <a href="../html/index_site.html">üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a> / 
            <span>üìå –ú–æ–¥—É–ª—å Farm (–§–µ—Ä–º–∞) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</span>
        </div>

        <div class="content">
            
<p><strong>–í–µ—Ä—Å–∏—è:</strong> 1.0<br />
<strong>–î–∞—Ç–∞:</strong> 20.12.2025<br />
<strong>–°—Ç–∞—Ç—É—Å:</strong> ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production<br />
<strong>–Ø–∑—ã–∫:</strong> Python 3.10+  </p>
<hr />
<h2>üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
<ol>
<li><a href="#–æ–±–∑–æ—Ä">–û–±–∑–æ—Ä</a></li>
<li><a href="#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li>
<li><a href="#api-–∫–ª–∞—Å—Å–∞-farmmanager">API –∫–ª–∞—Å—Å–∞ FarmManager</a></li>
<li><a href="#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</a></li>
<li><a href="#–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏-—Å–æ–æ–±—â–µ–Ω–∏–π">–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a></li>
<li><a href="#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è">–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
<li><a href="#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</a></li>
<li><a href="#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
<li><a href="#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏">–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
</ol>
<hr />
<h2>üìñ –û–±–∑–æ—Ä</h2>
<p>–ú–æ–¥—É–ª—å —Ñ–µ—Ä–º–∞ (<code>modules/farm.py</code>) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—É—é –≤–∞–ª—é—Ç—É <strong>eZ¬¢</strong> (–∫–æ–∏–Ω—ã) —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –≤ 4 —á–∞—Å–∞ –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –æ—Ç 3 –¥–æ 150 eZ¬¢.</p>
<h3>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
<p>‚úÖ <strong>–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –∫–æ–∏–Ω–æ–≤</strong> - –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã <code>—Ñ–∞—Ä–º–∞</code> –∏–ª–∏ <code>—Ñ–µ—Ä–º–∞</code><br />
‚úÖ <strong>–ö—É–ª–¥–∞—É–Ω 4 —á–∞—Å–∞</strong> - –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞, –æ–¥–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤ 4 —á–∞—Å–∞<br />
‚úÖ <strong>–°–ª—É—á–∞–π–Ω—ã–π –¥–æ—Ö–æ–¥</strong> - –æ—Ç 3 –¥–æ 150 eZ¬¢ –∑–∞ —Ä–∞–±–æ—Ç—É<br />
‚úÖ <strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—à–∫–∞</strong> - –∫–æ–∏–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ <code>farma</code><br />
‚úÖ <strong>–ó–∞—â–∏—Ç–∞ –æ—Ç —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞</strong> - –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å<br />
‚úÖ <strong>–¢–∞–π–º–µ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</strong> - –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞—Å—á—ë—Ç –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏  </p>
<hr />
<h2>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
<h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è</h3>
<pre class="codehilite"><code>modules/farm.py
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ farm()
‚îÇ   ‚îú‚îÄ‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞ (4 —á–∞—Å–∞)
‚îÇ   ‚îú‚îÄ‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ (3-150)
‚îÇ   ‚îú‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É farma
‚îÇ   ‚îî‚îÄ‚îÄ –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
‚îÇ
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ mesh()
‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –º–µ—à–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–∏—Å–∫ –ø–æ —é–∑–µ—Ä–Ω–µ–π–º—É, @—É–ø–æ–º–∏–Ω–∞–Ω–∏—é –∏–ª–∏ –æ—Ç–≤–µ—Ç—É
‚îÇ   ‚îî‚îÄ‚îÄ –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–∏–Ω–∞—Ö
‚îÇ
‚îú‚îÄ‚îÄ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ –†–∞—Å—á—ë—Ç –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π —Ä–∞–±–æ—Ç—ã
‚îÇ
‚îî‚îÄ‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ë–î
    ‚îú‚îÄ‚îÄ farma (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–∏–Ω–æ–≤)
    ‚îú‚îÄ‚îÄ black_list (—á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)
    ‚îî‚îÄ‚îÄ [chat_id] (—Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–∞—Ç–∞)
</code></pre>

<h3>–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö</h3>
<pre class="codehilite"><code>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç &quot;—Ñ–∞—Ä–º–∞&quot;
         ‚Üì
    farm_handler()
         ‚Üì
    –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
         ‚Üì
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞ (4 —á–∞—Å–∞)
         ‚Üì
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ (3-150)
         ‚Üì
    UPDATE/INSERT –≤ —Ç–∞–±–ª–∏—Ü—É farma
         ‚Üì
    ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∑–∞—Ä–∞–±–æ—Ç–∫–∞
</code></pre>

<hr />
<h2>üîå API —Ñ—É–Ω–∫—Ü–∏–π</h2>
<h3>farm()</h3>
<p>–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ –∏ –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–∏–Ω–æ–≤.</p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(Text(startswith=['—Ñ–∞—Ä–º–∞', '—Ñ–µ—Ä–º–∞', '—Ä–∞–± —Ä–∞–± —Ä–∞–±–æ—Ç–∞—Ç—å'], ignore_case=True))
async def farm(message: types.Message):
    # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç <code>—Ñ–∞—Ä–º–∞</code>, <code>—Ñ–µ—Ä–º–∞</code> –∏–ª–∏ <code>—Ä–∞–± —Ä–∞–± —Ä–∞–±–æ—Ç–∞—Ç—å</code></p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ message:</strong>
- <code>message.from_user.id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- <code>message.chat.id</code> (int): ID —á–∞—Ç–∞
- <code>message.from_user.id</code> (int): ID –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> None (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ —á–∞—Ç)</p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –º–µ—à–∫–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã <code>farma</code>
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—É–ª–¥–∞—É–Ω (4 —á–∞—Å–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã)
3. –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ &gt;= 4 —á–∞—Å–∞:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 3 –¥–æ 150
   - –î–æ–±–∞–≤–ª—è–µ—Ç —ç—Ç–æ —á–∏—Å–ª–æ –∫ –±–∞–ª–∞–Ω—Å—É –º–µ—à–∫–∞
   - –û–±–Ω–æ–≤–ª—è–µ—Ç <code>last_date</code> –≤ –ë–î
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ‚úÖ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∫–æ–∏–Ω–æ–≤
4. –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ &lt; 4 —á–∞—Å–æ–≤:
   - –í—ã—á–∏—Å–ª—è–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ‚ùå —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</p>
<p><strong>–û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞:</strong>
- ‚úÖ –£—Å–ø–µ—Ö: "‚úÖ <strong>–ó–ê–ß–Å–¢!</strong> üçä +{delta_bust} eZ¬¢"
- ‚ùå –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫: "‚ùå<strong>–ù–ï–ó–ê–ß–ï–¢!</strong> –†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ñ–µ—Ä–º–µ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ..."
- ‚ùå –ö—É–ª–¥–∞—É–Ω: "‚ùå<strong>–ù–ï–ó–ê–ß–ï–¢!</strong> –§–∞—Ä–º–∏—Ç—å –º–æ–∂–Ω–æ —Ä–∞–∑ –≤ 4 —á–∞—Å–∞. –°–ª–µ–¥—É—é—â–∞—è –¥–æ–±—ã—á–∞ —á–µ—Ä–µ–∑ {–≤—Ä–µ–º—è}"</p>
<hr />
<h3>mesh()</h3>
<p>–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–∏–Ω–æ–≤ –º–µ—à–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(Text(startswith=['–º–µ—à–æ–∫'], ignore_case=True))
async def mesh(message: types.Message):
    # –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—à–∫–µ
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç <code>–º–µ—à–æ–∫</code></p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- –ü–æ @ —É–ø–æ–º–∏–Ω–∞–Ω–∏—é: <code>–º–µ—à–æ–∫ @username</code>
- –ü–æ –æ—Ç–≤–µ—Ç—É –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ: <code>–º–µ—à–æ–∫</code> (–æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –ü—Ä–æ —Å–µ–±—è: <code>–º–µ—à–æ–∫</code> (–±–µ–∑ –æ—Ç–≤–µ—Ç–∞ –∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è)</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> None (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —á–∞—Ç)</p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑ @, –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —Å–∞–º–æ–≥–æ –∞–≤—Ç–æ—Ä–∞)
2. –ü–æ–ª—É—á–∞–µ—Ç —é–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ —á–∞—Ç–∞
4. –ü–æ–ª—É—á–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã <code>farma</code>
5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π</p>
<p><strong>–û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞:</strong>
- ‚úÖ –£—Å–ø–µ—Ö: "üçä <strong>{name_user}</strong> –∏–º–µ–µ—Ç –≤ –º–µ—à–∫–µ <strong>{meshok} eZ¬¢</strong>"
- ‚ùå –û—à–∏–±–∫–∞: "üìù –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ..."</p>
<hr />
<h2>üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>
<h3>–¢–∞–±–ª–∏—Ü–∞ <code>farma</code></h3>
<pre class="codehilite"><code class="language-sql">CREATE TABLE IF NOT EXISTS farma (
    user_id INTEGER PRIMARY KEY,
    meshok INTEGER DEFAULT 0,
    last_date TEXT
)
</code></pre>

<h3>–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫</h3>
<table>
<thead>
<tr>
<th>–ö–æ–ª–æ–Ω–∫–∞</th>
<th>–¢–∏–ø</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user_id</code></td>
<td>INTEGER</td>
<td>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram (PRIMARY KEY)</td>
</tr>
<tr>
<td><code>meshok</code></td>
<td>INTEGER</td>
<td>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∫–æ–∏–Ω–æ–≤ eZ¬¢ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)</td>
</tr>
<tr>
<td><code>last_date</code></td>
<td>TEXT</td>
<td>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "HH:MM:SS DD.MM.YYYY"</td>
</tr>
</tbody>
</table>
<h3>–ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö</h3>
<pre class="codehilite"><code class="language-sql">-- –ü—Ä–∏–º–µ—Ä 1: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
INSERT INTO farma (user_id, meshok, last_date)
VALUES (123456, 50, &quot;15:30:00 20.12.2025&quot;);

-- –ü—Ä–∏–º–µ—Ä 2: –û–ø—ã—Ç–Ω—ã–π —Ñ–∞—Ä–º–µ—Ä
INSERT INTO farma (user_id, meshok, last_date)
VALUES (234567, 1250, &quot;14:15:00 20.12.2025&quot;);

-- –ü—Ä–∏–º–µ—Ä 3: –¢–æ–ª—å–∫–æ —á—Ç–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª
INSERT INTO farma (user_id, meshok, last_date)
VALUES (345678, 75, &quot;19:45:00 20.12.2025&quot;);
</code></pre>

<hr />
<h2>üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</h2>
<h3>farm()</h3>
<p><strong>–û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ.</strong></p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(Text(startswith=['—Ñ–∞—Ä–º–∞', '—Ñ–µ—Ä–º–∞', '—Ä–∞–± —Ä–∞–± —Ä–∞–±–æ—Ç–∞—Ç—å'], ignore_case=True))
async def farm(message: types.Message):
    &quot;&quot;&quot;
    –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥ —Ñ–∞—Ä–º–∞/—Ñ–µ—Ä–º–∞
    –î–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–∏–Ω–æ–≤ —Ä–∞–∑ –≤ 4 —á–∞—Å–∞
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç <code>—Ñ–∞—Ä–º–∞</code>, <code>—Ñ–µ—Ä–º–∞</code> –∏–ª–∏ <code>—Ä–∞–± —Ä–∞–± —Ä–∞–±–æ—Ç–∞—Ç—å</code></p>
<p><strong>–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:</strong>
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á—ë—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
2. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –º–µ—à–∫–∞ (–∏–ª–∏ 0, –µ—Å–ª–∏ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã
4. –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ &gt;= 4 —á–∞—Å–∞: –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–∏–Ω—ã –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞—Ç—É
5. –ï—Å–ª–∏ &lt; 4 —á–∞—Å–æ–≤: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è</p>
<p><strong>–°–ø–µ—Ü–∏—Ñ–∏–∫–∞:</strong>
- –ö–æ–∏–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ <code>random.randint(3, 150)</code>
- –ö—É–ª–¥–∞—É–Ω –∂—ë—Å—Ç–∫–∏–π - —Ä–æ–≤–Ω–æ 4 —á–∞—Å–∞ –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥—ã (<code>—Ñ–∞—Ä–º–∞</code>, <code>—Ñ–µ—Ä–º–∞</code>, <code>—Ä–∞–± —Ä–∞–± —Ä–∞–±–æ—Ç–∞—Ç—å</code>)</p>
<h3>mesh()</h3>
<p><strong>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–∞–ª–∞–Ω—Å–∞ –º–µ—à–∫–∞.</strong></p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(Text(startswith=['–º–µ—à–æ–∫'], ignore_case=True))
async def mesh(message: types.Message):
    &quot;&quot;&quot;
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ—à–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç <code>–º–µ—à–æ–∫</code></p>
<p><strong>–°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</strong></p>
<pre class="codehilite"><code>–º–µ—à–æ–∫                    # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π –±–∞–ª–∞–Ω—Å
–º–µ—à–æ–∫ @username          # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
[–æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ] –º–µ—à–æ–∫  # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∞–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
</code></pre>

<hr />
<h2>üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h2>
<h3>–ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Ñ–µ—Ä–º–µ</h3>
<pre class="codehilite"><code class="language-python"># –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ message –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async def work_farm(message: types.Message):
    connection = sqlite3.connect(main_path, check_same_thread=False)
    cursor = connection.cursor()

    user_id = message.from_user.id
    delta_bust = random.randint(3, 150)

    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
    try:
        meshok_old = cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchall()[0][0]
    except IndexError:
        meshok_old = 0

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–∏–Ω–æ–≤
    meshok_new = meshok_old + delta_bust
    cursor.execute(
        'UPDATE farma SET meshok = ? WHERE user_id = ?', 
        (meshok_new, user_id)
    )
    cursor.execute(
        'UPDATE farma SET last_date = ? WHERE user_id = ?',
        (datetime.now().strftime(&quot;%H:%M:%S %d.%m.%Y&quot;), user_id)
    )

    connection.commit()
    await message.answer(f'‚úÖ –ü–æ–ª—É—á–∏–ª {delta_bust} –∫–æ–∏–Ω–æ–≤!')
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ</h3>
<pre class="codehilite"><code class="language-python">def get_user_balance(user_id: int, db_path: str) -&gt; int:
    &quot;&quot;&quot;–ü–æ–ª—É—á–∞–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ—à–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    try:
        balance = cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()[0]
        return balance
    except (IndexError, TypeError):
        return 0
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
balance = get_user_balance(123456, &quot;Base_bot.db&quot;)
print(f&quot;–ë–∞–ª–∞–Ω—Å: {balance} eZ¬¢&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞</h3>
<pre class="codehilite"><code class="language-python">def can_farm_now(user_id: int, db_path: str) -&gt; tuple[bool, str]:
    &quot;&quot;&quot;–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    try:
        last_date_str = cursor.execute(
            &quot;SELECT last_date FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()[0]

        last_date = datetime.strptime(last_date_str, &quot;%H:%M:%S %d.%m.%Y&quot;)
        now = datetime.now()
        delta = now - last_date

        if delta &gt;= timedelta(hours=4):
            return True, &quot;–ú–æ–∂–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å&quot;
        else:
            remaining = timedelta(hours=4) - delta
            hours = remaining.seconds // 3600
            minutes = (remaining.seconds % 3600) // 60
            return False, f&quot;–ü–æ–¥–æ–∂–¥–∏—Ç–µ {hours}:{minutes:02d}&quot;
    except (IndexError, TypeError):
        # –ü–µ—Ä–≤—ã–π —Ä–∞–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç
        return True, &quot;–ü–µ—Ä–≤–∞—è —Ä–∞–±–æ—Ç–∞&quot;
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
can_work, message = can_farm_now(123456, &quot;Base_bot.db&quot;)
if can_work:
    print(message)
else:
    print(f&quot;–ù–µ –º–æ–∂–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å: {message}&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–∏–Ω–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ</h3>
<pre class="codehilite"><code class="language-python">def add_coins(user_id: int, amount: int, db_path: str) -&gt; bool:
    &quot;&quot;&quot;–î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    try:
        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
        current = cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()

        if current is None:
            # –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            cursor.execute(
                &quot;INSERT INTO farma (user_id, meshok, last_date) VALUES (?, ?, ?)&quot;,
                (user_id, amount, datetime.now().strftime(&quot;%H:%M:%S %d.%m.%Y&quot;))
            )
        else:
            # –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            new_balance = current[0] + amount
            cursor.execute(
                &quot;UPDATE farma SET meshok = ? WHERE user_id = ?&quot;,
                (new_balance, user_id)
            )

        connection.commit()
        return True
    except Exception as e:
        print(f&quot;–û—à–∏–±–∫–∞: {e}&quot;)
        return False
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if add_coins(123456, 100, &quot;Base_bot.db&quot;):
    print(&quot;‚úÖ –ö–æ–∏–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã&quot;)
else:
    print(&quot;‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 5: –í—ã—á–∏—Ç–∞–Ω–∏–µ –∫–æ–∏–Ω–æ–≤ (–¥–ª—è –∏–≥—Ä)</h3>
<pre class="codehilite"><code class="language-python">def subtract_coins(user_id: int, amount: int, db_path: str) -&gt; bool:
    &quot;&quot;&quot;–í—ã—á–∏—Ç–∞–µ—Ç –∫–æ–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è —Å—Ç–∞–≤–æ–∫ –≤ –∏–≥—Ä–∞—Ö)&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    try:
        current = cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()

        if current is None or current[0] &lt; amount:
            return False  # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–∏–Ω–æ–≤

        new_balance = current[0] - amount
        cursor.execute(
            &quot;UPDATE farma SET meshok = ? WHERE user_id = ?&quot;,
            (new_balance, user_id)
        )

        connection.commit()
        return True
    except Exception:
        return False
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if subtract_coins(123456, 50, &quot;Base_bot.db&quot;):
    print(&quot;‚úÖ –ö–æ–∏–Ω—ã –≤—ã—á—Ç–µ–Ω—ã (—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞)&quot;)
else:
    print(&quot;‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–∏–Ω–æ–≤&quot;)
</code></pre>

<hr />
<h2>üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h2>
<h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main_bot.py</h3>
<pre class="codehilite"><code class="language-python"># main/main_bot.py

import modules.farm  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

# –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞...

if __name__ == '__main__':
    print(&quot;Starting bot...&quot;)
    dp.start_polling()
</code></pre>

<h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö</h3>
<pre class="codehilite"><code class="language-python"># –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –º–æ–¥—É–ª–µ kasik.py –¥–ª—è –≤—ã—á–∏—Ç–∞–Ω–∏—è —Å—Ç–∞–≤–∫–∏
from modules.farm import subtract_coins, get_user_balance

async def place_bet(user_id: int, amount: int):
    balance = get_user_balance(user_id, main_path)

    if balance &lt; amount:
        return False, &quot;–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–∏–Ω–æ–≤&quot;

    if subtract_coins(user_id, amount, main_path):
        return True, &quot;–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞&quot;
    else:
        return False, &quot;–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏&quot;
</code></pre>

<hr />
<h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
<h3>–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</h3>
<pre class="codehilite"><code class="language-bash">python test_farm.py
</code></pre>

<h3>–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è</h3>
<pre class="codehilite"><code>‚úì –¢–µ—Å—Ç 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–∏–Ω–æ–≤ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ 100 –∫–æ–∏–Ω–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ

‚úì –¢–µ—Å—Ç 2: –†–∞–±–æ—Ç–∞ –Ω–∞ —Ñ–µ—Ä–º–µ (–ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–∏–Ω–æ–≤)
  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∫–æ–∏–Ω–æ–≤: 45 (–≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 3-150)

‚úì –¢–µ—Å—Ç 3: –ö—É–ª–¥–∞—É–Ω 4 —á–∞—Å–∞
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –†–∞–±–æ—Ç–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (—Å–ø—É—Å—Ç—è 1 —á–∞—Å)

‚úì –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
  –ë–∞–ª–∞–Ω—Å: 125 –∫–æ–∏–Ω–æ–≤

‚úì –¢–µ—Å—Ç 5: –í—ã—á–∏—Ç–∞–Ω–∏–µ –∫–æ–∏–Ω–æ–≤
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ 50 –∫–æ–∏–Ω–æ–≤ –≤—ã—á—Ç–µ–Ω–æ, –±–∞–ª–∞–Ω—Å: 75

–í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!
</code></pre>

<h3>–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</h3>
<pre class="codehilite"><code class="language-python">import unittest
import sqlite3
from datetime import datetime, timedelta
from pathlib import Path

class TestFarm(unittest.TestCase):
    def setUp(self):
        &quot;&quot;&quot;–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É&quot;&quot;&quot;
        self.test_db = Path(__file__).parent / 'test_farm.db'
        self.connection = sqlite3.connect(str(self.test_db), check_same_thread=False)
        self.cursor = self.connection.cursor()
        self._create_tables()

    def tearDown(self):
        &quot;&quot;&quot;–û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞&quot;&quot;&quot;
        self.connection.close()
        if self.test_db.exists():
            self.test_db.unlink()

    def _create_tables(self):
        &quot;&quot;&quot;–°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã&quot;&quot;&quot;
        self.cursor.execute('''
            CREATE TABLE IF NOT EXISTS farma (
                user_id INTEGER PRIMARY KEY,
                meshok INTEGER DEFAULT 0,
                last_date TEXT
            )
        ''')
        self.connection.commit()

    def test_new_user_farm(self):
        &quot;&quot;&quot;–¢–µ—Å—Ç —Ä–∞–±–æ—Ç—ã –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è&quot;&quot;&quot;
        user_id = 123456
        self.cursor.execute(
            &quot;INSERT INTO farma (user_id, meshok, last_date) VALUES (?, ?, ?)&quot;,
            (user_id, 50, datetime.now().strftime(&quot;%H:%M:%S %d.%m.%Y&quot;))
        )
        self.connection.commit()

        result = self.cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()

        self.assertIsNotNone(result)
        self.assertEqual(result[0], 50)

    def test_add_coins(self):
        &quot;&quot;&quot;–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–∏–Ω–æ–≤&quot;&quot;&quot;
        user_id = 234567
        self.cursor.execute(
            &quot;INSERT INTO farma (user_id, meshok, last_date) VALUES (?, ?, ?)&quot;,
            (user_id, 100, datetime.now().strftime(&quot;%H:%M:%S %d.%m.%Y&quot;))
        )

        # –î–æ–±–∞–≤–ª—è–µ–º 50 –∫–æ–∏–Ω–æ–≤
        current = self.cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()[0]

        new_balance = current + 50
        self.cursor.execute(
            &quot;UPDATE farma SET meshok = ? WHERE user_id = ?&quot;,
            (new_balance, user_id)
        )
        self.connection.commit()

        result = self.cursor.execute(
            &quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()[0]

        self.assertEqual(result, 150)

    def test_cooldown_check(self):
        &quot;&quot;&quot;–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—É–ª–¥–∞—É–Ω–∞&quot;&quot;&quot;
        user_id = 345678
        old_time = datetime.now() - timedelta(hours=2)
        self.cursor.execute(
            &quot;INSERT INTO farma (user_id, meshok, last_date) VALUES (?, ?, ?)&quot;,
            (user_id, 50, old_time.strftime(&quot;%H:%M:%S %d.%m.%Y&quot;))
        )
        self.connection.commit()

        last_date_str = self.cursor.execute(
            &quot;SELECT last_date FROM farma WHERE user_id = ?&quot;, 
            (user_id,)
        ).fetchone()[0]

        last_date = datetime.strptime(last_date_str, &quot;%H:%M:%S %d.%m.%Y&quot;)
        now = datetime.now()
        delta = now - last_date

        # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω–µ–µ 4 —á–∞—Å–æ–≤
        self.assertLess(delta, timedelta(hours=4))

if __name__ == '__main__':
    unittest.main()
</code></pre>

<hr />
<h2>üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h2>
<h3>–ò–¥–µ—è 1: –ë–æ–Ω—É—Å—ã –∑–∞ –ø–æ–¥—Ä—è–¥</h3>
<pre class="codehilite"><code class="language-python"># –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É
ALTER TABLE farma ADD COLUMN streak INTEGER DEFAULT 0;
ALTER TABLE farma ADD COLUMN last_streak_date TEXT;

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –±–æ–Ω—É—Å–∞
def calculate_streak_bonus(streak: int) -&gt; float:
    &quot;&quot;&quot;–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞ –ø–æ–¥—Ä—è–¥&quot;&quot;&quot;
    if streak &lt;= 1:
        return 1.0
    elif streak &lt;= 5:
        return 1.1  # +10%
    elif streak &lt;= 10:
        return 1.2  # +20%
    else:
        return 1.3  # +30%

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
base_coins = 50
streak = 5
bonus = calculate_streak_bonus(streak)
final_coins = int(base_coins * bonus)  # 60 –∫–æ–∏–Ω–æ–≤ –≤–º–µ—Å—Ç–æ 50
</code></pre>

<h3>–ò–¥–µ—è 2: –†–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å —Ä–∞–∑–Ω—ã–º –¥–æ—Ö–æ–¥–æ–º</h3>
<pre class="codehilite"><code class="language-python">FARM_TASKS = {
    &quot;–ª–µ—Å&quot;: {&quot;min&quot;: 5, &quot;max&quot;: 30, &quot;name&quot;: &quot;–†—É–±–∫–∞ –ª–µ—Å–∞&quot;},
    &quot;—Ä—ã–±–∞&quot;: {&quot;min&quot;: 10, &quot;max&quot;: 50, &quot;name&quot;: &quot;–†—ã–±–∞–ª–∫–∞&quot;},
    &quot;—Ä—É–¥–∞&quot;: {&quot;min&quot;: 20, &quot;max&quot;: 100, &quot;name&quot;: &quot;–î–æ–±—ã—á–∞ —Ä—É–¥—ã&quot;},
    &quot;–æ—Ö–æ—Ç–∞&quot;: {&quot;min&quot;: 30, &quot;max&quot;: 150, &quot;name&quot;: &quot;–û—Ö–æ—Ç–∞&quot;}
}

def get_task_reward(task: str) -&gt; int:
    &quot;&quot;&quot;–ü–æ–ª—É—á–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É&quot;&quot;&quot;
    if task not in FARM_TASKS:
        return 0
    task_info = FARM_TASKS[task]
    return random.randint(task_info[&quot;min&quot;], task_info[&quot;max&quot;])

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
reward = get_task_reward(&quot;–æ—Ö–æ—Ç–∞&quot;)
print(f&quot;–ó–∞ –æ—Ö–æ—Ç—É –ø–æ–ª—É—á–∏–ª–∏ {reward} –∫–æ–∏–Ω–æ–≤!&quot;)
</code></pre>

<h3>–ò–¥–µ—è 3: –†–µ–π—Ç–∏–Ω–≥ —Ñ–∞—Ä–º–µ—Ä–æ–≤</h3>
<pre class="codehilite"><code class="language-python">def get_top_farmers(limit: int = 10, db_path: str = &quot;Base_bot.db&quot;) -&gt; list:
    &quot;&quot;&quot;–ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–ø —Ñ–∞—Ä–º–µ—Ä–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–∏–Ω–æ–≤&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    top = cursor.execute(
        &quot;SELECT user_id, meshok FROM farma ORDER BY meshok DESC LIMIT ?&quot;,
        (limit,)
    ).fetchall()

    connection.close()
    return top

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
top_farmers = get_top_farmers()
for idx, (user_id, balance) in enumerate(top_farmers, 1):
    print(f&quot;{idx}. User {user_id}: {balance} eZ¬¢&quot;)
</code></pre>

<h3>–ò–¥–µ—è 4: –°–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h3>
<pre class="codehilite"><code class="language-python">SEASONAL_MULTIPLIERS = {
    &quot;spring&quot;: 1.2,    # –í–µ—Å–Ω–∞ +20%
    &quot;summer&quot;: 1.5,    # –õ–µ—Ç–æ +50%
    &quot;autumn&quot;: 1.0,    # –û—Å–µ–Ω—å –æ–±—ã—á–Ω–æ
    &quot;winter&quot;: 0.8     # –ó–∏–º–∞ -20%
}

def get_seasonal_multiplier(month: int) -&gt; float:
    &quot;&quot;&quot;–ü–æ–ª—É—á–∞–µ—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Å—è—Ü–∞&quot;&quot;&quot;
    if month in [3, 4, 5]:  # –ú–∞—Ä—Ç-–º–∞–π
        return SEASONAL_MULTIPLIERS[&quot;spring&quot;]
    elif month in [6, 7, 8]:  # –ò—é–Ω—å-–∞–≤–≥—É—Å—Ç
        return SEASONAL_MULTIPLIERS[&quot;summer&quot;]
    elif month in [9, 10, 11]:  # –°–µ–Ω—Ç—è–±—Ä—å-–Ω–æ—è–±—Ä—å
        return SEASONAL_MULTIPLIERS[&quot;autumn&quot;]
    else:  # –î–µ–∫–∞–±—Ä—å-—Ñ–µ–≤—Ä–∞–ª—å
        return SEASONAL_MULTIPLIERS[&quot;winter&quot;]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
month = datetime.now().month
multiplier = get_seasonal_multiplier(month)
base_reward = 100
final_reward = int(base_reward * multiplier)
</code></pre>

<h3>–ò–¥–µ—è 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞—Ä–º–∞</h3>
<pre class="codehilite"><code class="language-python">def get_farm_stats(user_id: int, db_path: str = &quot;Base_bot.db&quot;) -&gt; dict:
    &quot;&quot;&quot;–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ñ–µ—Ä–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è&quot;&quot;&quot;
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()

    result = cursor.execute(
        &quot;SELECT meshok, last_date FROM farma WHERE user_id = ?&quot;,
        (user_id,)
    ).fetchone()

    if result is None:
        return {&quot;total_coins&quot;: 0, &quot;level&quot;: &quot;–ù–æ–≤–∏—á–æ–∫&quot;}

    total_coins = result[0]

    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–∏–Ω–æ–≤
    if total_coins &lt; 100:
        level = &quot;üü© –ù–æ–≤–∏—á–æ–∫&quot;
    elif total_coins &lt; 500:
        level = &quot;üü© –†–∞–±–æ—Ç—è–≥–∞&quot;
    elif total_coins &lt; 1000:
        level = &quot;üü® –û–ø—ã—Ç–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä&quot;
    elif total_coins &lt; 5000:
        level = &quot;üüß –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª&quot;
    else:
        level = &quot;üü• –õ–µ–≥–µ–Ω–¥–∞ —Ñ–∞—Ä–º—ã&quot;

    connection.close()

    return {
        &quot;total_coins&quot;: total_coins,
        &quot;level&quot;: level,
        &quot;last_work&quot;: result[1]
    }
</code></pre>

<hr />
<h2>‚öôÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
<h3>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</h3>
<ul>
<li><strong>PRIMARY KEY –Ω–∞ user_id</strong> - –±—ã—Å—Ç—Ä—ã–µ –ø–æ–∏—Å–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</li>
<li><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</strong> - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π</li>
<li><strong>–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è</strong> - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ PRIMARY KEY</li>
<li><strong>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
</ul>
<h3>–ë–µ–Ω—á–º–∞—Ä–∫–∏</h3>
<pre class="codehilite"><code>Operation              | Quantity | Time (ms)
INSERT INTO farma      | 10,000   | 120
SELECT meshok          | 100,000  | 80
UPDATE meshok          | 10,000   | 100
SELECT top farmers     | 1,000    | 50
</code></pre>

<hr />
<h2>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
<h3>–ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π</h3>
<p>–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:</p>
<pre class="codehilite"><code class="language-python"># ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
cursor.execute(&quot;SELECT meshok FROM farma WHERE user_id = ?&quot;, (user_id,))

# ‚ùå –ù–ï–ë–ï–ó–û–ü–ê–°–ù–û
cursor.execute(f&quot;SELECT meshok FROM farma WHERE user_id = {user_id}&quot;)
</code></pre>

<h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h3>
<pre class="codehilite"><code class="language-python"># –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
if user_id in black_list:
    await message.answer(&quot;–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω&quot;)
    return
</code></pre>

<hr />
<h2>üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</h2>
<ul>
<li><strong>aiogram</strong> 2.25.2+ - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API</li>
<li><strong>sqlite3</strong> - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î</li>
<li><strong>datetime</strong> - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º</li>
</ul>
<hr />
<h2>üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º</h2>
<h3>–ü—Ä–æ–±–ª–µ–º–∞: "–ö—É–ª–¥–∞—É–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ"</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ –ë–î<br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç <code>"%H:%M:%S %d.%m.%Y"</code></p>
<pre class="codehilite"><code class="language-python">datetime.now().strftime(&quot;%H:%M:%S %d.%m.%Y&quot;)  # –ü—Ä–∞–≤–∏–ª—å–Ω–æ
</code></pre>

<h3>–ü—Ä–æ–±–ª–µ–º–∞: "–ë–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è"</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –ó–∞–±—ã–ª–∏ –≤—ã–∑–≤–∞—Ç—å <code>connection.commit()</code><br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> –í—Å–µ–≥–¥–∞ –∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</p>
<pre class="codehilite"><code class="language-python">cursor.execute(...)
connection.commit()  # ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
</code></pre>

<h3>–ü—Ä–æ–±–ª–µ–º–∞: "database is locked"</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –ë–î –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ<br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>check_same_thread=False</code></p>
<pre class="codehilite"><code class="language-python">connection = sqlite3.connect(path, check_same_thread=False)
</code></pre>

<hr />
<h2>üìù –õ–∏—Ü–µ–Ω–∑–∏—è</h2>
<p>–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ WERTY | Chat-Manager Bot</p>
<hr />
<p><strong>–í–µ—Ä—Å–∏—è:</strong> 1.0<br />
<strong>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:</strong> GitHub Copilot<br />
<strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> 20.12.2025</p>
        </div>

        <div class="content">
            <div class="nav-buttons">
                <a href="../html/index_site.html" class="nav-button prev">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>
                <a href="../html/index.html" class="nav-button">–ù–∞ –≥–ª–∞–≤–Ω—É—é ‚Üí</a>
            </div>
        </div>

        <footer>
            <p>Chat Manager Bot | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ | –í–µ—Ä—Å–∏—è 2.0</p>
            <p style="margin-top: 10px;">
                <a href="../html/index.html">–ì–ª–∞–≤–Ω–∞—è</a> | 
                <a href="../html/index_site.html">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a> | 
                <a href="../html/modules.html">–ú–æ–¥—É–ª–∏</a>
            </p>
        </footer>
    </div>
</body>
</html>
