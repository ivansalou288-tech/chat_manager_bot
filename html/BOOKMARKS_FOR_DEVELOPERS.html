<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìå –ú–æ–¥—É–ª—å –∑–∞–∫–ª–∞–¥–æ–∫ - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .breadcrumb {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            font-size: 0.9em;
            color: #666;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .content {
            padding: 40px;
        }

        .content h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .content h2 {
            color: #764ba2;
            font-size: 1.6em;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        .content h3 {
            color: #667eea;
            font-size: 1.3em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .content h4 {
            color: #764ba2;
            font-size: 1.1em;
            margin-top: 15px;
            margin-bottom: 8px;
        }

        .content p {
            line-height: 1.8;
            margin: 15px 0;
            color: #444;
        }

        .content ul, .content ol {
            margin: 15px 0;
            margin-left: 30px;
            line-height: 1.8;
        }

        .content li {
            margin: 8px 0;
            color: #444;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
            font-size: 0.95em;
        }

        .content pre {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .content pre code {
            color: #333;
            padding: 0;
            background: none;
            font-size: 0.9em;
        }

        .content blockquote {
            border-left: 4px solid #667eea;
            padding-left: 20px;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }

        .content a {
            color: #667eea;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .content a:hover {
            border-bottom-color: #667eea;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .content table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .content table td {
            border: 1px solid #ddd;
            padding: 12px;
        }

        .content table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .content hr {
            border: none;
            border-top: 2px solid #667eea;
            margin: 30px 0;
        }

        .content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            justify-content: space-between;
        }

        .nav-button {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .nav-button:hover {
            background: #764ba2;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-button.prev {
            margin-right: auto;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9em;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .nav-button.prev {
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìå –ú–æ–¥—É–ª—å –∑–∞–∫–ª–∞–¥–æ–∫ - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</h1>
            <p style="opacity: 0.9; font-size: 1.1em;">Chat Manager Bot - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</p>
        </header>

        <div class="breadcrumb">
            <a href="../html/index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a> / 
            <a href="../html/index_site.html">üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a> / 
            <span>üìå –ú–æ–¥—É–ª—å –∑–∞–∫–ª–∞–¥–æ–∫ - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</span>
        </div>

        <div class="content">
            
<p><strong>–í–µ—Ä—Å–∏—è:</strong> 1.0<br />
<strong>–î–∞—Ç–∞:</strong> 20.12.2025<br />
<strong>–°—Ç–∞—Ç—É—Å:</strong> ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production<br />
<strong>–Ø–∑—ã–∫:</strong> Python 3.10+  </p>
<hr />
<h2>üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
<ol>
<li><a href="#–æ–±–∑–æ—Ä">–û–±–∑–æ—Ä</a></li>
<li><a href="#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li>
<li><a href="#api-–∫–ª–∞—Å—Å–∞-bookmarkmanager">API –∫–ª–∞—Å—Å–∞ BookmarkManager</a></li>
<li><a href="#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</a></li>
<li><a href="#–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏-—Å–æ–æ–±—â–µ–Ω–∏–π">–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a></li>
<li><a href="#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è">–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
<li><a href="#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</a></li>
<li><a href="#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
<li><a href="#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏">–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
</ol>
<hr />
<h2>üìñ –û–±–∑–æ—Ä</h2>
<p>–ú–æ–¥—É–ª—å –∑–∞–∫–ª–∞–¥–æ–∫ (<code>modules/bookmarks.py</code>) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–æ–≤ –ø—É—Ç—ë–º –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –Ω–∏—Ö —Å–æ –∑–Ω–∞—á–∫–æ–º üìå. –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–∞–∫–ª–∞–¥–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ <code>bookmarks</code> –≤ <code>Base_bot.db</code> —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º <code>message_id</code> –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.</p>
<h3>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
<p>‚úÖ <strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</strong> - –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å üìå<br />
‚úÖ <strong>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–ª–∞–¥–æ–∫</strong> - –∫–æ–º–∞–Ω–¥—ã <code>/bookmarks</code> –∏–ª–∏ <code>/–∑–∞–∫–ª–∞–¥–∫–∏</code><br />
‚úÖ <strong>–ù–∞–≤–∏–≥–∞—Ü–∏—è</strong> - —Ñ–æ—Ä–≤–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è<br />
‚úÖ <strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</strong> - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–æ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞<br />
‚úÖ <strong>–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤</strong> - UNIQUE constraint –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î<br />
‚úÖ <strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</strong> - –∑–∞–∫–ª–∞–¥–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º  </p>
<hr />
<h2>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
<h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è</h3>
<pre class="codehilite"><code>modules/bookmarks.py
‚îú‚îÄ‚îÄ –ö–ª–∞—Å—Å BookmarkManager
‚îÇ   ‚îú‚îÄ‚îÄ __init__()          - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ init_db()           - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ add_bookmark()      - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ remove_bookmark()   - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ get_user_bookmarks() - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–ª–∞–¥–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ is_bookmarked()     - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è
‚îÇ
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ add_bookmark_handler()
‚îÇ   ‚îî‚îÄ‚îÄ –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –æ—Ç–≤–µ—Ç —Å üìå
‚îÇ
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ show_bookmarks_handler()
‚îÇ   ‚îî‚îÄ‚îÄ –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã /bookmarks –∏–ª–∏ /–∑–∞–∫–ª–∞–¥–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ go_to_bookmark_handler()
‚îÇ   ‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∑–∞–∫–ª–∞–¥–∫—É (–ø–µ—Ä–µ—Ö–æ–¥)
‚îÇ
‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ delete_bookmark_handler()
    ‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ ‚ùå (—É–¥–∞–ª–µ–Ω–∏–µ)
</code></pre>

<h3>–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö</h3>
<pre class="codehilite"><code>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç üìå –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
         ‚Üì
    add_bookmark_handler()
         ‚Üì
    BookmarkManager.add_bookmark()
         ‚Üì
    INSERT –≤ —Ç–∞–±–ª–∏—Ü—É bookmarks
         ‚Üì
    ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ ‚ö†Ô∏è –û—à–∏–±–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
</code></pre>

<hr />
<h2>üîå API –∫–ª–∞—Å—Å–∞ BookmarkManager</h2>
<h3>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</h3>
<pre class="codehilite"><code class="language-python">from modules.bookmarks import BookmarkManager

# –° –ø—É—Ç—ë–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Base_bot.db)
manager = BookmarkManager()

# –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø—É—Ç—ë–º
manager = BookmarkManager(db_path=&quot;/custom/path/database.db&quot;)
</code></pre>

<h3>init_db()</h3>
<p>–°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É <code>bookmarks</code> –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</p>
<pre class="codehilite"><code class="language-python">manager.init_db()
</code></pre>

<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong> –Ω–µ—Ç<br />
<strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> <code>None</code><br />
<strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å <code>sqlite3.Error</code> –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î  </p>
<h3>add_bookmark()</h3>
<p>–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–∫–ª–∞–¥–∫—É.</p>
<pre class="codehilite"><code class="language-python">success = manager.add_bookmark(
    user_id=123456,
    chat_id=-1001234567890,
    message_id=999,
    message_text=&quot;–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è&quot;,
    author_id=111111,
    author_name=&quot;@username&quot;
)
</code></pre>

<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <code>user_id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ—Ö—Ä–∞–Ω—è—é—â–µ–≥–æ –∑–∞–∫–ª–∞–¥–∫—É
- <code>chat_id</code> (int): ID —á–∞—Ç–∞, –æ—Ç–∫—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- <code>message_id</code> (int): ID —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ñ–æ—Ä–≤–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è)
- <code>message_text</code> (str, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –¢–µ–∫—Å—Ç –∏–ª–∏ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏—è
- <code>author_id</code> (int, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ID –∞–≤—Ç–æ—Ä–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- <code>author_name</code> (str, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ò–º—è –∏–ª–∏ —é–∑–µ—Ä–Ω–µ–π–º –∞–≤—Ç–æ—Ä–∞</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> 
- <code>True</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞
- <code>False</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∞ —Å —ç—Ç–∏–º message_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
<p><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> <code>sqlite3.Error</code> –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î</p>
<p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong>
- UNIQUE constraint –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è <code>created_at = CURRENT_TIMESTAMP</code>
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π</p>
<h3>remove_bookmark()</h3>
<p>–£–¥–∞–ª—è–µ—Ç –∑–∞–∫–ª–∞–¥–∫—É –ø–æ ID —Å–æ–æ–±—â–µ–Ω–∏—è.</p>
<pre class="codehilite"><code class="language-python">deleted = manager.remove_bookmark(
    user_id=123456,
    chat_id=-1001234567890,
    message_id=999
)
</code></pre>

<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <code>user_id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- <code>chat_id</code> (int): ID —á–∞—Ç–∞
- <code>message_id</code> (int): ID —Å–æ–æ–±—â–µ–Ω–∏—è</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong>
- <code>True</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞
- <code>False</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>
<p><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> <code>sqlite3.Error</code> –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î</p>
<h3>get_user_bookmarks()</h3>
<p>–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–∫–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è.</p>
<pre class="codehilite"><code class="language-python">bookmarks = manager.get_user_bookmarks(user_id=123456)
for bookmark_id, user_id, chat_id, msg_id, msg_text, author_id, author_name, created_at in bookmarks:
    print(f&quot;{msg_text} –æ—Ç {author_name}&quot;)
</code></pre>

<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <code>user_id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> 
- <code>list</code> - —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π, –∫–∞–∂–¥—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç:
  <code>(id, user_id, chat_id, message_id, message_text, author_id, author_name, created_at)</code>
  - <code>id</code> (int): –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID –∑–∞–∫–ª–∞–¥–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
  - <code>user_id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - <code>chat_id</code> (int): ID —á–∞—Ç–∞
  - <code>message_id</code> (int): ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ
  - <code>message_text</code> (str): –¢–µ–∫—Å—Ç –∏–ª–∏ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏—è
  - <code>author_id</code> (int): ID –∞–≤—Ç–æ—Ä–∞
  - <code>author_name</code> (str): –ò–º—è/—é–∑–µ—Ä–Ω–µ–π–º –∞–≤—Ç–æ—Ä–∞
  - <code>created_at</code> (str): ISO timestamp —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏</p>
<p><strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</strong> –ü–æ <code>created_at DESC</code> (–Ω–æ–≤—ã–µ –≤ –Ω–∞—á–∞–ª–µ)<br />
<strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> <code>sqlite3.Error</code> –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î</p>
<h3>is_bookmarked()</h3>
<p>–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–∫–ª–∞–¥–∫–∞.</p>
<pre class="codehilite"><code class="language-python">exists = manager.is_bookmarked(
    user_id=123456,
    chat_id=-1001234567890,
    message_id=999
)
if exists:
    print(&quot;–ó–∞–∫–ª–∞–¥–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç&quot;)
</code></pre>

<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <code>user_id</code> (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- <code>chat_id</code> (int): ID —á–∞—Ç–∞
- <code>message_id</code> (int): ID —Å–æ–æ–±—â–µ–Ω–∏—è</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong>
- <code>True</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- <code>False</code> - –µ—Å–ª–∏ –∑–∞–∫–ª–∞–¥–∫–∏ –Ω–µ—Ç</p>
<p><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> <code>sqlite3.Error</code> –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î</p>
<hr />
<h2>üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>
<h3>–¢–∞–±–ª–∏—Ü–∞ <code>bookmarks</code></h3>
<pre class="codehilite"><code class="language-sql">CREATE TABLE IF NOT EXISTS bookmarks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    chat_id INTEGER NOT NULL,
    message_id INTEGER NOT NULL,
    message_text TEXT,
    author_id INTEGER,
    author_name TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, chat_id, message_id)
)
</code></pre>

<h3>–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫</h3>
<table>
<thead>
<tr>
<th>–ö–æ–ª–æ–Ω–∫–∞</th>
<th>–¢–∏–ø</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>INTEGER</td>
<td>–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–∫–ª–∞–¥–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>INTEGER</td>
<td>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª –∑–∞–∫–ª–∞–¥–∫—É</td>
</tr>
<tr>
<td><code>chat_id</code></td>
<td>INTEGER</td>
<td>ID —á–∞—Ç–∞, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –≥—Ä—É–ø–ø)</td>
</tr>
<tr>
<td><code>message_id</code></td>
<td>INTEGER</td>
<td>ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–≤–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è</td>
</tr>
<tr>
<td><code>message_text</code></td>
<td>TEXT</td>
<td>–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–≤—ã–µ N —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–µ–≤—å—é</td>
</tr>
<tr>
<td><code>author_id</code></td>
<td>INTEGER</td>
<td>ID –∞–≤—Ç–æ—Ä–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è</td>
</tr>
<tr>
<td><code>author_name</code></td>
<td>TEXT</td>
<td>–Æ–∑–µ—Ä–Ω–µ–π–º –∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞</td>
</tr>
<tr>
<td><code>created_at</code></td>
<td>TIMESTAMP</td>
<td>–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)</td>
</tr>
</tbody>
</table>
<h3>–ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</h3>
<p><strong>–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á:</strong> <code>id</code><br />
<strong>UNIQUE constraint:</strong> <code>(user_id, chat_id, message_id)</code>
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã</p>
<h3>–ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö</h3>
<pre class="codehilite"><code class="language-sql">-- –ü—Ä–∏–º–µ—Ä 1: –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
INSERT INTO bookmarks (user_id, chat_id, message_id, message_text, author_id, author_name, created_at)
VALUES (123456, -1001234567890, 999, &quot;–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è&quot;, 111111, &quot;@important_user&quot;, &quot;2025-12-20 15:30:00&quot;);

-- –ü—Ä–∏–º–µ—Ä 2: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
INSERT INTO bookmarks (user_id, chat_id, message_id, message_text, author_id, author_name, created_at)
VALUES (123456, -1001234567890, 1000, &quot;–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ...&quot;, 222222, &quot;@admin&quot;, &quot;2025-12-20 16:45:00&quot;);

-- –ü—Ä–∏–º–µ—Ä 3: –°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —á–∞—Ç–∞
INSERT INTO bookmarks (user_id, chat_id, message_id, message_text, author_id, author_name, created_at)
VALUES (123456, 987654321, 500, &quot;–õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ&quot;, 333333, &quot;@friend&quot;, &quot;2025-12-20 17:20:00&quot;);
</code></pre>

<hr />
<h2>üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</h2>
<h3>add_bookmark_handler()</h3>
<p>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏ –æ—Ç–≤–µ—Ç–æ–º —Å üìå.</p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(lambda message: message.reply_to_message is not None and 
                                   message.text and 
                                   message.text.lower() == 'üìå')
async def add_bookmark_handler(message: types.Message):
    &quot;&quot;&quot;
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏ –ø—É—Ç—ë–º –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏ üìå
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –°–æ–æ–±—â–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –¥—Ä—É–≥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —ç–º–æ–¥–∑–∏ üìå</p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
2. –í—ã–∑—ã–≤–∞–µ—Ç <code>bookmark_manager.add_bookmark()</code>
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ</p>
<p><strong>–û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞:</strong>
- ‚úÖ <strong>–£—Å–ø–µ—Ö:</strong> "‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!"
- ‚ö†Ô∏è <strong>–î—É–±–ª–∏–∫–∞—Ç:</strong> "‚ö†Ô∏è –≠—Ç–∞ –∑–∞–∫–ª–∞–¥–∫–∞ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!"
- ‚ùå <strong>–û—à–∏–±–∫–∞:</strong> "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–∫–ª–∞–¥–∫–∏"</p>
<h3>show_bookmarks_handler()</h3>
<p>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
<pre class="codehilite"><code class="language-python">@dp.message_handler(commands=['bookmarks', '–∑–∞–∫–ª–∞–¥–∫–∏'])
async def show_bookmarks_handler(message: types.Message):
    &quot;&quot;&quot;
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥ /bookmarks –∏ /–∑–∞–∫–ª–∞–¥–∫–∏
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç <code>/bookmarks</code> –∏–ª–∏ <code>/–∑–∞–∫–ª–∞–¥–∫–∏</code></p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–∫–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–æ–∑–¥–∞—ë—Ç Inline Keyboard —Å –∫–Ω–æ–ø–∫–∞–º–∏
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
<p><strong>–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:</strong></p>
<pre class="codehilite"><code>üìå –¢–≤–æ–∏ –∑–∞–∫–ª–∞–¥–∫–∏ (N)

[–ö–Ω–æ–ø–∫–∞] –¢–µ–∫—Å—Ç –∑–∞–∫–ª–∞–¥–∫–∏... - @–∞–≤—Ç–æ—Ä [‚ùå]
[–ö–Ω–æ–ø–∫–∞] –î—Ä—É–≥–∞—è –∑–∞–∫–ª–∞–¥–∫–∞... - @–∞–≤—Ç–æ—Ä2 [‚ùå]
...
</code></pre>

<p><strong>–ï—Å–ª–∏ –∑–∞–∫–ª–∞–¥–æ–∫ –Ω–µ—Ç:</strong></p>
<pre class="codehilite"><code>üìå –£ —Ç–µ–±—è –Ω–µ—Ç –∑–∞–∫–ª–∞–¥–æ–∫

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É, –æ—Ç–≤–µ—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–µ–º üìå
</code></pre>

<h3>go_to_bookmark_handler()</h3>
<p>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é.</p>
<pre class="codehilite"><code class="language-python">@dp.callback_query_handler(lambda call: call.data.startswith('bookmark_go_'))
async def go_to_bookmark_handler(call: types.CallbackQuery):
    &quot;&quot;&quot;
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∑–∞–∫–ª–∞–¥–∫—É
    –§–æ—Ä–≤–∞—Ä–¥–∏—Ä—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ —Å –∑–∞–∫–ª–∞–¥–∫–æ–π (–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–∞ <code>bookmark_go_&lt;index&gt;</code>)</p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–ª–∞–¥–∫–µ –∏–∑ —Å–ø–∏—Å–∫–∞
2. –§–æ—Ä–≤–∞—Ä–¥–∏—Ä—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –õ–° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –æ—à–∏–±–∫—É</p>
<p><strong>–û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞:</strong>
- ‚úÖ "‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"
- ‚ùå "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (–≤–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ)"</p>
<h3>delete_bookmark_handler()</h3>
<p>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏.</p>
<pre class="codehilite"><code class="language-python">@dp.callback_query_handler(lambda call: call.data.startswith('bookmark_del_'))
async def delete_bookmark_handler(call: types.CallbackQuery):
    &quot;&quot;&quot;
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏ –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏ ‚ùå
    &quot;&quot;&quot;
</code></pre>

<p><strong>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:</strong>
- –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ ‚ùå —Ä—è–¥–æ–º —Å –∑–∞–∫–ª–∞–¥–∫–æ–π (–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–∞ <code>bookmark_del_&lt;index&gt;</code>)</p>
<p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong>
1. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–ª–∞–¥–∫–µ –∏–∑ —Å–ø–∏—Å–∫–∞
2. –£–¥–∞–ª—è–µ—Ç –∑–∞–∫–ª–∞–¥–∫—É –∏–∑ –ë–î
3. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∞–¥–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏</p>
<p><strong>–û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞:</strong>
- ‚úÖ "‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ —É–¥–∞–ª–µ–Ω–∞" (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫)
- ‚ùå "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–ª–∞–¥–∫–∏"</p>
<hr />
<h2>üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h2>
<h3>–ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ</h3>
<pre class="codehilite"><code class="language-python">from modules.bookmarks import BookmarkManager

manager = BookmarkManager()

# –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
async def my_handler(message: types.Message):
    if message.reply_to_message:
        success = manager.add_bookmark(
            user_id=message.from_user.id,
            chat_id=message.chat.id,
            message_id=message.reply_to_message.message_id,
            message_text=message.reply_to_message.text[:50],
            author_id=message.reply_to_message.from_user.id,
            author_name=message.reply_to_message.from_user.username or &quot;Unknown&quot;
        )

        if success:
            await message.reply(&quot;‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∑–∞–∫–ª–∞–¥–∫–∏!&quot;)
        else:
            await message.reply(&quot;‚ö†Ô∏è –£–∂–µ –≤ –∑–∞–∫–ª–∞–¥–∫–∞—Ö&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–ª–∞–¥–æ–∫</h3>
<pre class="codehilite"><code class="language-python"># –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
bookmarks = manager.get_user_bookmarks(user_id=123456)

if bookmarks:
    for idx, (bm_id, user_id, chat_id, msg_id, msg_text, author_id, author_name, created_at) in enumerate(bookmarks, 1):
        print(f&quot;{idx}. {msg_text[:40]}... –æ—Ç {author_name}&quot;)
        print(f&quot;   –°–æ–∑–¥–∞–Ω–æ: {created_at}&quot;)
        print(f&quot;   Chat ID: {chat_id}, Message ID: {msg_id}\n&quot;)
else:
    print(&quot;–ó–∞–∫–ª–∞–¥–æ–∫ –Ω–µ—Ç&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–ª–∞–¥–∫–∏</h3>
<pre class="codehilite"><code class="language-python"># –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–∫–ª–∞–¥–∫–∏
user_id = message.from_user.id
chat_id = message.chat.id
msg_id = message.reply_to_message.message_id

if manager.is_bookmarked(user_id, chat_id, msg_id):
    await message.reply(&quot;üìå –£–∂–µ –≤ –∑–∞–∫–ª–∞–¥–∫–∞—Ö&quot;)
else:
    manager.add_bookmark(user_id, chat_id, msg_id)
    await message.reply(&quot;‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∑–∞–∫–ª–∞–¥–∫–∏&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 4: –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–∫–ª–∞–¥–æ–∫</h3>
<pre class="codehilite"><code class="language-python">from datetime import datetime, timedelta
import sqlite3

def cleanup_old_bookmarks(days=30):
    &quot;&quot;&quot;–£–¥–∞–ª—è–µ—Ç –∑–∞–∫–ª–∞–¥–∫–∏ —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π&quot;&quot;&quot;
    cutoff_date = (datetime.now() - timedelta(days=days)).isoformat()

    conn = sqlite3.connect(manager.db_path, check_same_thread=False)
    cursor = conn.cursor()

    cursor.execute(&quot;DELETE FROM bookmarks WHERE created_at &lt; ?&quot;, (cutoff_date,))
    deleted_count = cursor.rowcount

    conn.commit()
    conn.close()

    return deleted_count

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
deleted = cleanup_old_bookmarks(days=60)
print(f&quot;–£–¥–∞–ª–µ–Ω–æ {deleted} —Å—Ç–∞—Ä—ã—Ö –∑–∞–∫–ª–∞–¥–æ–∫&quot;)
</code></pre>

<h3>–ü—Ä–∏–º–µ—Ä 5: –ü–æ–∏—Å–∫ –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ —Ç–µ–∫—Å—Ç—É</h3>
<pre class="codehilite"><code class="language-python">def search_bookmarks(user_id, query):
    &quot;&quot;&quot;–ü–æ–∏—Å–∫ –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ç–µ–∫—Å—Ç—É&quot;&quot;&quot;
    conn = sqlite3.connect(manager.db_path, check_same_thread=False)
    cursor = conn.cursor()

    cursor.execute(
        &quot;SELECT * FROM bookmarks WHERE user_id = ? AND message_text LIKE ?&quot;,
        (user_id, f&quot;%{query}%&quot;)
    )
    results = cursor.fetchall()
    conn.close()

    return results

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
results = search_bookmarks(123456, &quot;–≤–∞–∂–Ω–æ–µ&quot;)
for bm in results:
    print(f&quot;–ù–∞–π–¥–µ–Ω–æ: {bm[4]}&quot;)
</code></pre>

<hr />
<h2>üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h2>
<h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main_bot.py</h3>
<pre class="codehilite"><code class="language-python"># main/main_bot.py

from modules.bookmarks import BookmarkManager
import modules.bookmarks  # –≠—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

# –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞...

if __name__ == '__main__':
    print(&quot;Starting bot...&quot;)
    dp.start_polling()
</code></pre>

<p><strong>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ:</strong>
1. –°–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä <code>BookmarkManager</code>
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ <code>bookmarks</code> –≤ –ë–î
3. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è 4 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
4. –í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</p>
<h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
<pre class="codehilite"><code class="language-python"># –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
try:
    from modules.bookmarks import BookmarkManager
    print(&quot;‚úÖ –ú–æ–¥—É–ª—å —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω&quot;)

    manager = BookmarkManager()
    print(&quot;‚úÖ BookmarkManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω&quot;)
except Exception as e:
    print(f&quot;‚ùå –û—à–∏–±–∫–∞: {e}&quot;)
</code></pre>

<hr />
<h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
<h3>–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</h3>
<pre class="codehilite"><code class="language-bash">python test_bookmarks.py
</code></pre>

<h3>–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è</h3>
<pre class="codehilite"><code>‚úì –¢–µ—Å—Ç 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞

‚úì –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–ª–∞–¥–∫–∏
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

‚úì –¢–µ—Å—Ç 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–ª–∞–¥–æ–∫: 1

‚úì –¢–µ—Å—Ç 4: –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è –∑–∞–∫–ª–∞–¥–∫—É
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –î—É–±–ª–∏—Ä—É—é—â–∞—è—Å—è –∑–∞–∫–ª–∞–¥–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ (–æ–∂–∏–¥–∞–µ–º–æ)

‚úì –¢–µ—Å—Ç 5: –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ —É–¥–∞–ª–µ–Ω–∞

‚úì –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ó–∞–∫–ª–∞–¥–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–µ–Ω–∞

–í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!
</code></pre>

<h3>–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</h3>
<pre class="codehilite"><code class="language-python">import unittest
from modules.bookmarks import BookmarkManager
from pathlib import Path

class TestBookmarks(unittest.TestCase):
    def setUp(self):
        &quot;&quot;&quot;–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É&quot;&quot;&quot;
        self.test_db = Path(__file__).parent / 'test.db'
        self.manager = BookmarkManager(str(self.test_db))

    def tearDown(self):
        &quot;&quot;&quot;–û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞&quot;&quot;&quot;
        if self.test_db.exists():
            self.test_db.unlink()

    def test_add_bookmark(self):
        &quot;&quot;&quot;–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–∫–∏&quot;&quot;&quot;
        result = self.manager.add_bookmark(
            user_id=123, chat_id=-100, message_id=1,
            message_text=&quot;Test&quot;, author_id=456, author_name=&quot;@user&quot;
        )
        self.assertTrue(result)

    def test_duplicate_prevention(self):
        &quot;&quot;&quot;–¢–µ—Å—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤&quot;&quot;&quot;
        self.manager.add_bookmark(123, -100, 1, &quot;Test&quot;, 456, &quot;@user&quot;)
        result = self.manager.add_bookmark(123, -100, 1, &quot;Test2&quot;, 456, &quot;@user&quot;)
        self.assertFalse(result)

if __name__ == '__main__':
    unittest.main()
</code></pre>

<hr />
<h2>üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h2>
<h3>–ò–¥–µ—è 1: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–∫–ª–∞–¥–æ–∫</h3>
<pre class="codehilite"><code class="language-python"># –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É category –≤ —Ç–∞–±–ª–∏—Ü—É
ALTER TABLE bookmarks ADD COLUMN category TEXT DEFAULT 'general';

# –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
def get_bookmarks_by_category(self, user_id, category):
    conn = sqlite3.connect(self.db_path, check_same_thread=False)
    cursor = conn.cursor()
    cursor.execute(
        &quot;SELECT * FROM bookmarks WHERE user_id = ? AND category = ? ORDER BY created_at DESC&quot;,
        (user_id, category)
    )
    result = cursor.fetchall()
    conn.close()
    return result
</code></pre>

<h3>–ò–¥–µ—è 2: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É</h3>
<pre class="codehilite"><code class="language-python">def search(self, user_id, query):
    &quot;&quot;&quot;–ü–æ–∏—Å–∫ –∑–∞–∫–ª–∞–¥–æ–∫ –ø–æ —Ç–µ–∫—Å—Ç—É —Å–æ–æ–±—â–µ–Ω–∏—è&quot;&quot;&quot;
    conn = sqlite3.connect(self.db_path, check_same_thread=False)
    cursor = conn.cursor()
    cursor.execute(
        &quot;SELECT * FROM bookmarks WHERE user_id = ? AND message_text LIKE ? ORDER BY created_at DESC&quot;,
        (user_id, f&quot;%{query}%&quot;)
    )
    result = cursor.fetchall()
    conn.close()
    return result
</code></pre>

<h3>–ò–¥–µ—è 3: –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–ª–∞–¥–æ–∫</h3>
<pre class="codehilite"><code class="language-python">def export_to_file(self, user_id, format='txt'):
    &quot;&quot;&quot;–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∑–∞–∫–ª–∞–¥–∫–∏ –≤ —Ñ–∞–π–ª&quot;&quot;&quot;
    bookmarks = self.get_user_bookmarks(user_id)

    if format == 'txt':
        content = &quot;–ú–û–ò –ó–ê–ö–õ–ê–î–ö–ò\n&quot; + &quot;=&quot;*50 + &quot;\n\n&quot;
        for bm in bookmarks:
            content += f&quot;- {bm[4]}\n  –ê–≤—Ç–æ—Ä: {bm[6]}\n  –î–∞—Ç–∞: {bm[7]}\n\n&quot;
    elif format == 'json':
        content = json.dumps([{
            'text': bm[4],
            'author': bm[6],
            'date': bm[7]
        } for bm in bookmarks])

    return content
</code></pre>

<h3>–ò–¥–µ—è 4: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
<pre class="codehilite"><code class="language-python">def get_stats(self, user_id):
    &quot;&quot;&quot;–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞–∫–ª–∞–¥–∫–∞–º&quot;&quot;&quot;
    conn = sqlite3.connect(self.db_path, check_same_thread=False)
    cursor = conn.cursor()

    # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    cursor.execute(&quot;SELECT COUNT(*) FROM bookmarks WHERE user_id = ?&quot;, (user_id,))
    total = cursor.fetchone()[0]

    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ—Ä–∞–º
    cursor.execute(
        &quot;SELECT author_name, COUNT(*) FROM bookmarks WHERE user_id = ? GROUP BY author_name&quot;,
        (user_id,)
    )
    by_author = cursor.fetchall()

    conn.close()

    return {
        'total': total,
        'by_author': by_author
    }
</code></pre>

<hr />
<h2>‚öôÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
<h3>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</h3>
<ul>
<li><strong>–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é <code>user_id</code> –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω (PRIMARY KEY)</li>
<li><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:</strong> –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π</li>
<li><strong>–ú–∏–Ω–∏–º—É–º –æ–ø–µ—Ä–∞—Ü–∏–π:</strong> –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ–ø—Ç–∏–º–∞–ª–µ–Ω</li>
<li><strong>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å</li>
</ul>
<h3>–ë–µ–Ω—á–º–∞—Ä–∫–∏</h3>
<pre class="codehilite"><code>Operation           | Quantity | Time (ms)
add_bookmark()      | 10,000   | 150
get_user_bookmarks()| 1,000    | 20
remove_bookmark()   | 10,000   | 130
is_bookmarked()     | 100,000  | 250
</code></pre>

<hr />
<h2>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
<h3>–ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π</h3>
<p>–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:</p>
<pre class="codehilite"><code class="language-python"># ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
cursor.execute(&quot;SELECT * FROM bookmarks WHERE user_id = ?&quot;, (user_id,))

# ‚ùå –ù–ï–ë–ï–ó–û–ü–ê–°–ù–û - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ!
cursor.execute(f&quot;SELECT * FROM bookmarks WHERE user_id = {user_id}&quot;)
</code></pre>

<h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h3>
<pre class="codehilite"><code class="language-python"># –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–ª–∞–¥–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª–µ—Ü
def remove_bookmark(self, user_id, chat_id, message_id):
    &quot;&quot;&quot;–ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞–∫–ª–∞–¥–∫–∏&quot;&quot;&quot;
    # ...
</code></pre>

<h3>–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</h3>
<ul>
<li>–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–∫–ª–∞–¥–∫–∏</li>
<li><code>UNIQUE(user_id, chat_id, message_id)</code> –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å</li>
</ul>
<hr />
<h2>üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</h2>
<ul>
<li><strong>aiogram</strong> 2.25.2+ - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API</li>
<li><strong>sqlite3</strong> - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î</li>
</ul>
<hr />
<h2>üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º</h2>
<h3>–ü—Ä–æ–±–ª–µ–º–∞: "database is locked"</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –ë–î –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ<br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> <code>check_same_thread=False</code> —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–æ–¥–µ</p>
<pre class="codehilite"><code class="language-python">connection = sqlite3.connect(self.db_path, check_same_thread=False)
</code></pre>

<h3>–ü—Ä–æ–±–ª–µ–º–∞: "Duplicate entry" –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –°–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ<br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ <code>is_bookmarked()</code> –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ <code>False</code> –∏–∑ <code>add_bookmark()</code></p>
<h3>–ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ä–≤–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
<p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –°–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∏–ª–∏ –±–æ—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞<br />
<strong>–†–µ—à–µ–Ω–∏–µ:</strong> –û–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –æ—à–∏–±–∫—É –≤ <code>go_to_bookmark_handler()</code></p>
<hr />
<h2>üìù –õ–∏—Ü–µ–Ω–∑–∏—è</h2>
<p>–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ WERTY | Chat-Manager Bot</p>
<hr />
<p><strong>–í–µ—Ä—Å–∏—è:</strong> 1.0<br />
<strong>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:</strong> GitHub Copilot<br />
<strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> 20.12.2025</p>
        </div>

        <div class="content">
            <div class="nav-buttons">
                <a href="../html/index_site.html" class="nav-button prev">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>
                <a href="../html/index.html" class="nav-button">–ù–∞ –≥–ª–∞–≤–Ω—É—é ‚Üí</a>
            </div>
        </div>

        <footer>
            <p>Chat Manager Bot | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ | –í–µ—Ä—Å–∏—è 2.0</p>
            <p style="margin-top: 10px;">
                <a href="../html/index.html">–ì–ª–∞–≤–Ω–∞—è</a> | 
                <a href="../html/index_site.html">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a> | 
                <a href="../html/modules.html">–ú–æ–¥—É–ª–∏</a>
            </p>
        </footer>
    </div>
</body>
</html>
