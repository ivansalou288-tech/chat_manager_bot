# üé≠ –ú–æ–¥—É–ª—å Mafia (–ú–∞—Ñ–∏—è) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 20.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production  
**–Ø–∑—ã–∫:** Python 3.10+  

---

## üìñ –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å Mafia (`modules/mafia.py`) —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ä–æ–ª–µ–≤—É—é –∏–≥—Ä—É "–ú–∞—Ñ–∏—è" —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 6+ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–æ–ª–µ–π, –Ω–æ—á–Ω—ã—Ö –∏ –¥–Ω–µ–≤–Ω—ã—Ö —Ñ–∞–∑, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –∏–≥—Ä—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏** - –ú–∏—Ä–Ω—ã–π, –î–æ–Ω, –ú–∞—Ñ–∏—è, –ö–æ–º–∏—Å—Å–∞—Ä, –î–æ–∫—Ç–æ—Ä, –ú–∞–Ω—å—è–∫  
‚úÖ **–§–∞–∑—ã –∏–≥—Ä—ã** - –ù–æ—á—å/–î–µ–Ω—å —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏  
‚úÖ **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ** - –î–Ω–µ–≤–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞  
‚úÖ **–ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** - –£–±–∏–π—Å—Ç–≤–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞—â–∏—Ç–∞  
‚úÖ **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –£—á—ë—Ç —Ä–æ–ª–µ–π, –ø–æ–±–µ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π  
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î  

---

## üé≠ –†–æ–ª–∏ –≤ –∏–≥—Ä–µ

### –†–æ–ª–∏ –≥–æ—Ä–æ–∂–∞–Ω

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|---------|---------|
| üë• –ú–∏—Ä–Ω—ã–π | –û–±—ã—á–Ω—ã–π –∂–∏—Ç–µ–ª—å –±–µ–∑ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π | –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –¥–Ω—ë–º |
| üïµÔ∏è –ö–æ–º–∏—Å—Å–∞—Ä | –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª—å –∏–ª–∏ —É–±–∏—Ç—å –Ω–æ—á—å—é |
| üè• –î–æ–∫—Ç–æ—Ä | –ó–∞—â–∏—Ç–Ω–∏–∫ | –°–ø–∞—Å–∏—Ç—å –∏–≥—Ä–æ–∫–∞ –æ—Ç —É–±–∏–π—Å—Ç–≤–∞ –Ω–æ—á—å—é |

### –†–æ–ª–∏ –º–∞—Ñ–∏–∏

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|---------|---------|
| üï¥ –î–æ–Ω | –ì–ª–∞–≤–∞ –º–∞—Ñ–∏–∏ | –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —É–±–∏–π—Å—Ç–≤–∞ –∏ –∑–Ω–∞–µ—Ç –¥—Ä—É–≥–∏—Ö |
| üíÄ –ú–∞—Ñ–∏—è | –ß–ª–µ–Ω –º–∞—Ñ–∏–∏ | –£—á–∞—Å—Ç–≤—É–µ—Ç –≤ —É–±–∏–π—Å—Ç–≤–∞—Ö |

### –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|---------|---------|
| üî™ –ú–∞–Ω—å—è–∫ | –£–±–∏–π—Ü–∞-–æ–¥–∏–Ω–æ—á–∫–∞ | –£–±–∏–≤–∞–µ—Ç –Ω–æ—á—å—é –¥–ª—è —Å–µ–±—è |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π

```python
QUANTITY_OF_ROLES = {
    4: '2 1 0 0 1 0',  # 4 –∏–≥—Ä–æ–∫–∞: 2 –º–∏—Ä–Ω—ã—Ö, 1 –¥–æ–Ω, 0 –º–∞—Ñ–∏–∏, 0 –∫–æ–º–∏—Å—Å–∞—Ä, 1 –¥–æ–∫—Ç–æ—Ä, 0 –º–∞–Ω—å—è–∫
    5: '2 1 0 1 1 0',
    6: '3 1 0 1 1 0',
    7: '4 1 0 1 1 0',
    8: '4 1 1 1 1 0',
    9: '4 1 1 1 1 1',
    10: '4 1 2 1 1 1'
}

def parse_roles(count: int) -> dict:
    """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É —Ä–æ–ª–µ–π –≤ —Å–ª–æ–≤–∞—Ä—å"""
    if count not in QUANTITY_OF_ROLES:
        return {}
    
    roles_str = QUANTITY_OF_ROLES[count]
    mirny, don, mafia, police, doctor, maniak = map(int, roles_str.split())
    
    return {
        'mirny': mirny,
        'don': don,
        'mafia': mafia,
        'police': police,
        'doctor': doctor,
        'maniak': maniak
    }
```

### –ü–æ—Ç–æ–∫ –∏–≥—Ä—ã

```
–ò–≥—Ä–æ–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è
         ‚Üì
–†–æ–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ
         ‚Üì
–ù–û–ß–¨ 1: –î–µ–π—Å—Ç–≤–∏—è –º–∞—Ñ–∏–∏, –¥–æ–∫—Ç–æ—Ä–∞, –∫–æ–º–∏—Å—Å–∞—Ä–∞
         ‚Üì
–î–ï–ù–¨ 1: –í—Å–µ –≥–æ–ª–æ—Å—É—é—Ç –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
         ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
         ‚Üì
–ù–û–ß–¨ 2: –ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è
         ‚Üì
–î–ï–ù–¨ 2: –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
         ‚Üì
... (–ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)
         ‚Üì
–ü–æ–±–µ–∂–¥–∞—é—Ç –≥–æ—Ä–æ–∂–∞–Ω–µ –ò–õ–ò –º–∞—Ñ–∏—è –ò–õ–ò –º–∞–Ω—å—è–∫
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã

```python
async def start_mafia_game(chat_id: int, players: list[int], bot: Bot) -> bool:
    """–ù–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—É—é –∏–≥—Ä—É –º–∞—Ñ–∏–∏"""
    player_count = len(players)
    
    if player_count < 4:
        return False  # –ú–∏–Ω–∏–º—É–º 4 –∏–≥—Ä–æ–∫–∞
    
    # –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
    roles_dist = parse_roles(player_count)
    
    # –°–æ–∑–¥–∞—ë–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–æ–ª–µ–π
    all_roles = (
        ['mirny'] * roles_dist['mirny'] +
        ['don'] * roles_dist['don'] +
        ['mafia'] * roles_dist['mafia'] +
        ['police'] * roles_dist['police'] +
        ['doctor'] * roles_dist['doctor'] +
        ['maniak'] * roles_dist['maniak']
    )
    
    # –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Ä–æ–ª–∏
    random.shuffle(all_roles)
    
    # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É
    player_roles = {player_id: role for player_id, role in zip(players, all_roles)}
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–æ–ª—è–º–∏
    for player_id, role in player_roles.items():
        role_info = ROLES_ABOUT.get(role, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ä–æ–ª—å")
        await bot.send_message(player_id, f"üé≠ –í–∞—à–∞ —Ä–æ–ª—å: {role_info}")
    
    return True
```

### –ü—Ä–∏–º–µ—Ä 2: –ù–æ—á–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –º–∞—Ñ–∏–∏

```python
async def mafia_night_vote(game_id: str, db_path: str) -> int:
    """–ü—Ä–æ–≤–æ–¥–∏—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –º–∞—Ñ–∏–∏ –∑–∞ –∂–µ—Ä—Ç–≤—É"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –∂–∏–≤—ã—Ö —á–ª–µ–Ω–æ–≤ –º–∞—Ñ–∏–∏
    mafia_members = cursor.execute(
        "SELECT user_id FROM mafia_game_players WHERE game_id = ? AND role IN ('don', 'mafia') AND alive = 1",
        (game_id,)
    ).fetchall()
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –∂–∏–≤—ã—Ö –≥–æ—Ä–æ–∂–∞–Ω (–∫—Ä–æ–º–µ –º–∞—Ñ–∏–∏)
    possible_victims = cursor.execute(
        "SELECT user_id FROM mafia_game_players WHERE game_id = ? AND role NOT IN ('don', 'mafia') AND alive = 1",
        (game_id,)
    ).fetchall()
    
    # –ö–∞–∂–¥—ã–π —á–ª–µ–Ω –º–∞—Ñ–∏–∏ –≥–æ–ª–æ—Å—É–µ—Ç
    votes = {}
    for member_id, in mafia_members:
        # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –∂–µ—Ä—Ç–≤—É
        victim_id = random.choice(possible_victims)[0]
        votes[victim_id] = votes.get(victim_id, 0) + 1
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∂–µ—Ä—Ç–≤—É —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤
    if votes:
        victim_id = max(votes, key=votes.get)
        return victim_id
    
    connection.close()
    return None
```

### –ü—Ä–∏–º–µ—Ä 3: –î–Ω–µ–≤–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

```python
async def day_voting(game_id: str, votes: dict[int, int], db_path: str) -> int:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–Ω–µ–≤–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    # –ù–∞—Ö–æ–¥–∏–º –∏–≥—Ä–æ–∫–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤
    if not votes:
        return None
    
    voted_out = max(votes, key=votes.get)
    vote_count = votes[voted_out]
    
    # –£–¥–∞–ª—è–µ–º –∏–≥—Ä–æ–∫–∞ –∏–∑ –∂–∏–≤—ã—Ö
    cursor.execute(
        "UPDATE mafia_game_players SET alive = 0 WHERE game_id = ? AND user_id = ?",
        (game_id, voted_out)
    )
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–∫–ª—é—á—ë–Ω–Ω–æ–º –∏–≥—Ä–æ–∫–µ
    player_info = cursor.execute(
        "SELECT user_id, nik, role FROM mafia_game_players WHERE game_id = ? AND user_id = ?",
        (game_id, voted_out)
    ).fetchone()
    
    connection.commit()
    connection.close()
    
    return player_info
```

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã

```python
def check_win_condition(game_id: str, db_path: str) -> tuple[bool, str]:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—ã–∏–≥—Ä–∞–ª–∞ –ª–∏ –∫–∞–∫–∞—è-—Ç–æ —Å—Ç–æ—Ä–æ–Ω–∞"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∂–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –ø–æ —Ä–æ–ª—è–º
    alive_counts = cursor.execute('''
        SELECT role, COUNT(*) FROM mafia_game_players 
        WHERE game_id = ? AND alive = 1
        GROUP BY role
    ''', (game_id,)).fetchall()
    
    alive_by_role = {role: count for role, count in alive_counts}
    
    mafia_alive = alive_by_role.get('don', 0) + alive_by_role.get('mafia', 0)
    townspeople_alive = sum(count for role, count in alive_by_role.items() 
                           if role not in ['don', 'mafia'])
    maniak_alive = alive_by_role.get('maniak', 0)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
    if mafia_alive == 0:
        connection.close()
        return True, "–ì–æ—Ä–æ–∂–∞–Ω–µ –≤—ã–∏–≥—Ä–∞–ª–∏! –ú–∞—Ñ–∏—è —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞!"
    
    if mafia_alive >= townspeople_alive:
        connection.close()
        return True, "–ú–∞—Ñ–∏—è –≤—ã–∏–≥—Ä–∞–ª–∞!"
    
    if maniak_alive > 0 and townspeople_alive + mafia_alive == 1:
        connection.close()
        return True, "–ú–∞–Ω—å—è–∫ –≤—ã–∏–≥—Ä–∞–ª!"
    
    connection.close()
    return False, None
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `mafia_game_players`

```sql
CREATE TABLE IF NOT EXISTS mafia_game_players (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    game_id TEXT NOT NULL,
    chat_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    nik TEXT,
    role TEXT NOT NULL,
    alive INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

### –¢–∞–±–ª–∏—Ü–∞ `mafia_game_actions`

```sql
CREATE TABLE IF NOT EXISTS mafia_game_actions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    game_id TEXT NOT NULL,
    night_number INTEGER NOT NULL,
    actor_id INTEGER NOT NULL,
    action TEXT NOT NULL,
    target_id INTEGER,
    result TEXT,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ò–¥–µ—è 1: –ù–æ–≤—ã–µ —Ä–æ–ª–∏

```python
EXTENDED_ROLES = {
    # ... —Å—Ç–∞—Ä—ã–µ —Ä–æ–ª–∏ ...
    "love": "üíï –í–ª—é–±–ª—ë–Ω–Ω—ã–µ - –ø–∞—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤, –∑–∞—â–∏—â–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞",
    "witch": "üßô –í–µ–¥—å–º–∞ - –º–æ–∂–µ—Ç —Å–ø–∞—Å—Ç–∏ –∏–ª–∏ –ø—Ä–æ–∫–ª—è—Å—Ç—å",
    "informant": "üïµÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ç–æ—Ä - –∑–Ω–∞–µ—Ç –æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –º–∞—Ñ–∏–∏"
}
```

### –ò–¥–µ—è 2: –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```python
def get_player_mafia_stats(user_id: int, db_path: str) -> dict:
    """–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–∞ –≤ –º–∞—Ñ–∏–∏"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    stats = cursor.execute('''
        SELECT role, COUNT(*) as games, SUM(CASE WHEN alive = 1 THEN 1 ELSE 0 END) as wins
        FROM mafia_game_players
        WHERE user_id = ?
        GROUP BY role
    ''', (user_id,)).fetchall()
    
    connection.close()
    
    return {role: {"games": games, "wins": wins} for role, games, wins in stats}
```

### –ò–¥–µ—è 3: –†–µ–π—Ç–∏–Ω–≥ –ª—É—á—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤

```python
def get_mafia_leaderboard(chat_id: int, limit: int = 10, db_path: str = "mafia.db") -> list:
    """–ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –ª—É—á—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –º–∞—Ñ–∏–∏"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    leaders = cursor.execute('''
        SELECT user_id, COUNT(*) as games_played, 
               SUM(CASE WHEN alive = 1 THEN 1 ELSE 0 END) as wins
        FROM mafia_game_players
        WHERE chat_id = ?
        GROUP BY user_id
        ORDER BY wins DESC
        LIMIT ?
    ''', (chat_id, limit)).fetchall()
    
    connection.close()
    return leaders
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–†–æ–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π

```python
random.shuffle(all_roles)  # ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ò–≥—Ä–∞ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è

```python
won, message = check_win_condition(game_id, db_path)
if won:
    await notify_game_end(chat_id, message)
    delete_game(game_id)
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ WERTY | Chat-Manager Bot

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** GitHub Copilot  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 20.12.2025
