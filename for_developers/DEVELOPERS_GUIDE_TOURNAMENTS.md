# üèÜ –ú–æ–¥—É–ª—å Tournaments (–¢—É—Ä–Ω–∏—Ä—ã) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 20.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production  
**–Ø–∑—ã–∫:** Python 3.10+  

---

## üìñ –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å Tournaments (`modules/turnaments.py`) —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–∞–Ω–¥–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø–æ–±–µ–¥ –∏ –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ–º –∏—Ç–æ–≥–æ–≤.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç –Ω–æ–≤—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏  
‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** - –∫–∞–∫ –ª–∏—á–Ω–∞—è, —Ç–∞–∫ –∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–º** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏  
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–±–µ–¥** - —Å–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ–Ω–∏—è —Å—á—ë—Ç–∞  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥** - —Å–ª—É—á–∞–π–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≥—Ä—É–ø–ø—ã  
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Ç—É—Ä–Ω–∏—Ä–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î  
‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID** - –∫–∞–∂–¥—ã–π —Ç—É—Ä–Ω–∏—Ä –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä  

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—É—Ä–Ω–∏—Ä–∞

```
–¢—É—Ä–Ω–∏—Ä
‚îú‚îÄ‚îÄ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ID (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π 8-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥)
‚îÇ   ‚îú‚îÄ‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä (ID + –∏–º—è)
‚îÇ   ‚îú‚îÄ‚îÄ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
‚îÇ   ‚îú‚îÄ‚îÄ –ú–∞–∫—Å–∏–º—É–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã
‚îÇ
‚îú‚îÄ‚îÄ –û–ø–∏—Å–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ –ü—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ –°—Ç–∞—Ç—É—Å
‚îÇ   ‚îú‚îÄ‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞/–∑–∞–∫—Ä—ã—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ –¢—É—Ä–Ω–∏—Ä –∏–¥—ë—Ç
‚îÇ   ‚îî‚îÄ‚îÄ –ó–∞–≤–µ—Ä—à—ë–Ω
‚îÇ
‚îú‚îÄ‚îÄ –£—á–∞—Å—Ç–Ω–∏–∫–∏/–ö–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∞–Ω–¥–∞—Ö
‚îÇ   ‚îî‚îÄ‚îÄ –°—á—ë—Ç –ø–æ–±–µ–¥
‚îÇ
‚îî‚îÄ‚îÄ –ò—Å—Ç–æ—Ä–∏—è
    ‚îî‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î
```

---

## üîå API —Ñ—É–Ω–∫—Ü–∏–π —Ç—É—Ä–Ω–∏—Ä–æ–≤

### create_tournament()

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ç—É—Ä–Ω–∏—Ä.

```python
def create_tournament(
    moder_id: int,
    chat_id: int,
    name: str,
    date: str,          # "HH:MM:SS DD.MM.YYYY"
    max_participants: int,
    rules: str,
    comments: str,
    db_path: str = "tournaments.db"
) -> tuple[bool, str]:
    """
    –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ç—É—Ä–Ω–∏—Ä
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: (—É—Å–ø–µ—Ö, ID_—Ç—É—Ä–Ω–∏—Ä–∞_–∏–ª–∏_—Å–æ–æ–±—â–µ–Ω–∏–µ_–æ–±_–æ—à–∏–±–∫–µ)
    """
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `moder_id` (int): ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
- `chat_id` (int): ID —á–∞—Ç–∞, –≥–¥–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç—É—Ä–Ω–∏—Ä
- `name` (str): –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞
- `date` (str): –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "HH:MM:SS DD.MM.YYYY"
- `max_participants` (int): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (1-60)
- `rules` (str): –ü—Ä–∞–≤–∏–ª–∞ —Ç—É—Ä–Ω–∏—Ä–∞
- `comments` (str): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `db_path` (str): –ü—É—Ç—å –∫ –ë–î

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `(True, tournament_id)` - —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
- `(False, error_message)` - –æ—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞

```python
def create_tournament_example():
    """–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞"""
    success, result = create_tournament(
        moder_id=123456,
        chat_id=-1001234567890,
        name="–ß–µ–º–ø–∏–æ–Ω–∞—Ç –ø–æ PvP 2025",
        date="18:00:00 25.12.2025",
        max_participants=16,
        rules="No items, Only weapons, Final –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ",
        comments="–ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç 1000 —Ä—É–±–ª–µ–π",
        db_path="tournaments.db"
    )
    
    if success:
        print(f"‚úÖ –¢—É—Ä–Ω–∏—Ä —Å–æ–∑–¥–∞–Ω! ID: {result}")
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞: {result}")
```

### –ü—Ä–∏–º–µ—Ä 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞

```python
def register_participant(tournament_id: str, user_id: int, user_name: str, db_path: str) -> bool:
    """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ —Ç—É—Ä–Ω–∏—Ä"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –º–µ—Å—Ç–æ
        cursor.execute(
            "SELECT registered_count, max_participants FROM tournaments WHERE id = ?",
            (tournament_id,)
        )
        result = cursor.fetchone()
        
        if not result:
            return False
        
        registered_count, max_participants = result
        
        if registered_count >= max_participants:
            return False  # –ù–µ—Ç –º–µ—Å—Ç–∞
        
        # –î–æ–±–∞–≤–ª—è–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞
        cursor.execute(
            "INSERT INTO tournament_participants (tournament_id, user_id, user_name) VALUES (?, ?, ?)",
            (tournament_id, user_id, user_name)
        )
        
        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
        cursor.execute(
            "UPDATE tournaments SET registered_count = registered_count + 1 WHERE id = ?",
            (tournament_id,)
        )
        
        connection.commit()
        return True
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if register_participant("A1B2C3D4", 123456, "Ivan", "tournaments.db"):
    print("‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞")
else:
    print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã

```python
def register_team(tournament_id: str, captain_id: int, team_members: list[int], db_path: str) -> bool:
    """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ —Ç—É—Ä–Ω–∏—Ä"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    try:
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –∫–æ–º–∞–Ω–¥—ã
        import secrets
        team_id = f"TEAM_{secrets.token_hex(4)}"
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É
        cursor.execute(
            "INSERT INTO tournament_teams (tournament_id, team_id, captain_id) VALUES (?, ?, ?)",
            (tournament_id, team_id, captain_id)
        )
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ –∫–æ–º–∞–Ω–¥—ã
        for member_id in team_members:
            cursor.execute(
                "INSERT INTO tournament_team_members (team_id, user_id) VALUES (?, ?)",
                (team_id, member_id)
            )
        
        connection.commit()
        return True
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
team_members = [123456, 234567, 345678, 456789]
if register_team("A1B2C3D4", 123456, team_members, "tournaments.db"):
    print("‚úÖ –ö–æ–º–∞–Ω–¥–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞")
```

### –ü—Ä–∏–º–µ—Ä 4: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–±–µ–¥

```python
def record_victory(tournament_id: str, team_id: str, db_path: str) -> bool:
    """–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–±–µ–¥—É –¥–ª—è –∫–æ–º–∞–Ω–¥—ã"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    try:
        cursor.execute(
            "UPDATE tournament_teams SET wins = wins + 1 WHERE tournament_id = ? AND team_id = ?",
            (tournament_id, team_id)
        )
        
        connection.commit()
        return True
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if record_victory("A1B2C3D4", "TEAM_ABC123", "tournaments.db"):
    print("‚úÖ –ü–æ–±–µ–¥–∞ –∑–∞–ø–∏—Å–∞–Ω–∞")
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–±–µ–¥

```python
def get_tournament_leaderboard(tournament_id: str, db_path: str) -> list:
    """–ü–æ–ª—É—á–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    try:
        leaderboard = cursor.execute(
            "SELECT team_id, captain_id, wins FROM tournament_teams WHERE tournament_id = ? ORDER BY wins DESC",
            (tournament_id,)
        ).fetchall()
        
        return leaderboard
    finally:
        connection.close()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
leaderboard = get_tournament_leaderboard("A1B2C3D4", "tournaments.db")
for idx, (team_id, captain, wins) in enumerate(leaderboard, 1):
    print(f"{idx}. –ö–æ–º–∞–Ω–¥–∞ {team_id} (–∫–∞–ø–∏—Ç–∞–Ω {captain}): {wins} –ø–æ–±–µ–¥")
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `tournaments`

```sql
CREATE TABLE IF NOT EXISTS tournaments (
    id TEXT PRIMARY KEY,
    chat_id INTEGER NOT NULL,
    organizer_id INTEGER NOT NULL,
    organizer_name TEXT,
    name TEXT NOT NULL,
    date TEXT NOT NULL,
    max_participants INTEGER NOT NULL,
    registered_count INTEGER DEFAULT 0,
    rules TEXT,
    comments TEXT,
    status TEXT DEFAULT 'registration',  -- registration, active, finished
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

### –¢–∞–±–ª–∏—Ü–∞ `tournament_participants`

```sql
CREATE TABLE IF NOT EXISTS tournament_participants (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    tournament_id TEXT NOT NULL,
    user_id INTEGER NOT NULL,
    user_name TEXT,
    registered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(tournament_id) REFERENCES tournaments(id)
)
```

### –¢–∞–±–ª–∏—Ü–∞ `tournament_teams`

```sql
CREATE TABLE IF NOT EXISTS tournament_teams (
    team_id TEXT PRIMARY KEY,
    tournament_id TEXT NOT NULL,
    captain_id INTEGER NOT NULL,
    wins INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(tournament_id) REFERENCES tournaments(id)
)
```

### –¢–∞–±–ª–∏—Ü–∞ `tournament_team_members`

```sql
CREATE TABLE IF NOT EXISTS tournament_team_members (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    team_id TEXT NOT NULL,
    user_id INTEGER NOT NULL,
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(team_id) REFERENCES tournament_teams(team_id)
)
```

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ò–¥–µ—è 1: –°–∏—Å—Ç–µ–º–∞ –ø–ª–µ–π-–æ—Ñ—Ñ

```python
def generate_playoff_bracket(tournament_id: str, db_path: str) -> list[tuple]:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–æ–Ω—à—Ç–µ–π–Ω –ø–ª–µ–π-–æ—Ñ—Ñ –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ–±–µ–¥
    participants = cursor.execute(
        "SELECT team_id FROM tournament_teams WHERE tournament_id = ? ORDER BY wins DESC",
        (tournament_id,)
    ).fetchall()
    
    connection.close()
    
    # –°–æ–∑–¥–∞—ë–º –º–∞—Ç—á–∏: 1 vs 2, 3 vs 4, –∏ —Ç.–¥.
    bracket = []
    for i in range(0, len(participants), 2):
        if i + 1 < len(participants):
            bracket.append((participants[i][0], participants[i+1][0]))
    
    return bracket
```

### –ò–¥–µ—è 2: –°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø

```python
def divide_into_groups(tournament_id: str, group_size: int = 4, db_path: str = "tournaments.db") -> dict:
    """–†–∞–∑–¥–µ–ª—è–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –≥—Ä—É–ø–ø—ã"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    participants = cursor.execute(
        "SELECT user_id FROM tournament_participants WHERE tournament_id = ?",
        (tournament_id,)
    ).fetchall()
    
    connection.close()
    
    groups = {}
    for i, (user_id,) in enumerate(participants):
        group_num = i // group_size
        if group_num not in groups:
            groups[group_num] = []
        groups[group_num].append(user_id)
    
    return groups
```

### –ò–¥–µ—è 3: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

```python
def calculate_tournament_rating(user_id: int, db_path: str) -> float:
    """–†–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤"""
    connection = sqlite3.connect(db_path, check_same_thread=False)
    cursor = connection.cursor()
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã –≥–¥–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –∏–≥—Ä–æ–∫
    tournaments = cursor.execute(
        "SELECT t.id, t.max_participants, tt.wins FROM tournaments t "
        "JOIN tournament_teams tt ON t.id = tt.tournament_id "
        "WHERE tt.captain_id = ?",
        (user_id,)
    ).fetchall()
    
    connection.close()
    
    rating = 0
    for tournament_id, max_participants, wins in tournaments:
        # –†–µ–π—Ç–∏–Ω–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç—É—Ä–Ω–∏—Ä–∞ –∏ –ø–æ–±–µ–¥
        tournament_rating = (wins / max_participants) * 100
        rating += tournament_rating
    
    return rating
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–¢—É—Ä–Ω–∏—Ä –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
date = "18:00:00 25.12.2025"
datetime.strptime(date, "%H:%M:%S %d.%m.%Y")

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
date = "25.12.2025 18:00:00"  # –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫
```

### –ü—Ä–æ–±–ª–µ–º–∞: "ID —Ç—É—Ä–Ω–∏—Ä–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π"

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 8-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥

```python
from password_generator import PasswordGenerator

pwo = PasswordGenerator()
tournament_id = pwo.shuffle_password('ASDFGHJKL12345678', 8)  # –†–æ–≤–Ω–æ 8 —Å–∏–º–≤–æ–ª–æ–≤
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã

```python
# –ü–æ–ª—É—á–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞
tournament_info = cursor.execute(
    "SELECT team_size FROM tournaments WHERE id = ?",
    (tournament_id,)
).fetchone()

team_size = tournament_info[0] if tournament_info else 1
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ WERTY | Chat-Manager Bot

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** GitHub Copilot  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 20.12.2025
